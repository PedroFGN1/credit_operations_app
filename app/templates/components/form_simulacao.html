<!-- Formulário de Simulação -->
<form action="{{ url_for('operation_bp.operacoes_de_credito') }}" method="GET" class="flex flex-col justify-start sm:grid sm:grid-cols-2 xl:grid-cols-3 gap-3 mb-6" onsubmit="prepareForm()">
    
    <!-- Seletor de Ano com Botão de Filtro -->
    <div class="flex items-center justify-center gap-4">
        <!--Select de Ano-->
        <div class="px-auto flex flex-col items-start justify-center">
            <label for="ano" class="block font-medium text-sm text-gray-500">Selecione o ano:</label>
            <span class="absolute">
                <img src="https://img.icons8.com/?size=100&id=15640&format=png&color=000000" alt="money--v1" class="w-7 h-7 mr-3 ml-2 pt-1 text-gray-400"/>
            </span>
            <select id="ano" name="ano" class="mt-2 pl-11 block w-48 font-semibold placeholder-gray-400/70 rounded-lg border border-gray-200 bg-white pr-3 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40" required>
                {% for ano_item in anos %}
                    <option class="font-semibold"  value="{{ ano_item }}" {% if ano_item == ano %}selected{% endif %}>
                        {{ ano_item }}
                    </option>
                {% endfor %}
            </select>
            <p class="mt-2 text-xs text-gray-400"></p>
        </div>
        <!--Botão de Filtro-->
        <button @click="if (requisitado > 0) mostrarBarra = true" type="submit" class="px-6 py-2 w-30 font-medium text-white capitalize transition-colors duration-300 transform bg-[#0056a0] rounded-lg hover:bg-white hover:border hover:border-[#0056a0] hover:text-[#0056a0] focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-80 cursor-pointer">
            filtrar
        </button>
    </div>
    
    <!-- Campo de Valor Requisitado e Botão de Simular -->
    <div class="flex items-center justify-center gap-4">
        <!--Campo de Valor Requisitado-->
        <div class="px-auto flex flex-col items-start justify-center">
            <label for="requisitado" class="col-start-1 block font-medium text-sm text-gray-500">Valor a contratar:</label>
            <span class="absolute">
                <img src="https://img.icons8.com/?size=100&id=yUTNKgUuTlsA&format=png&color=000000" alt="money--v1" class="w-7 h-7 mr-3 ml-2 text-gray-400"/>
            </span>
            <input id="requisitado" type="text" name="requisitado_formatted" placeholder=" R$ 0,00" class="mt-2 block w-auto grow placeholder-gray-400/70 rounded-lg border border-gray-200 bg-white px-10 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40" oninput="formatCurrency(this)" />
            <input id="requisitado_hidden" type="hidden" name="requisitado" />
            <p class="mt-2 text-xs text-gray-400">Digite aqui o valor da operação desejada.</p>
        </div>
        <!--Botão de Simular-->
        <button @click="if (requisitado > 0) mostrarBarra = true" type="submit" class="px-6 py-2 w-40 font-medium text-white capitalize transition-colors duration-300 transform bg-[#009e3c] rounded-lg hover:bg-white hover:border hover:border-[#009e3c] hover:text-[#009e3c] focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-80 cursor-pointer">
            Simular
        </button>
    </div>

    <table class="table-auto my-12 mx-8 sm:col-span-2 xl:col-span-1">
        <thead>
            <tr>
            <th></th>
            <th></th>
            </tr>
        </thead>
        <tbody class="border-y-2">
            <tr>
            <td class="font-medium text-center text-blue-900">Máximo disponível</td>
            <td class="text-center text-red-600 font-medium">R$ &nbsp;&nbsp;{{ (dados_barra.limite - tabela[1].operacao_credito) | separador_milhar}}</td>
            </tr>
        </tbody>
    </table>
</form>

